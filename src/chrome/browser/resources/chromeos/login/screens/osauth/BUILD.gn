# Copyright 2023 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//chrome/common/features.gni")
import("//third_party/closure_compiler/compile_js.gni")
import("//tools/polymer/html_to_js.gni")

js_type_check("closure_compile") {
  is_polymer3 = true
  closure_flags = default_closure_args
  deps = [
    ":apply_online_password",
    ":cryptohome_recovery",
    ":cryptohome_recovery_setup",
    ":enter_old_password",
    ":factor_setup_success",
    ":fingerprint_setup",
    ":gaia_password_changed",
    ":local_data_loss_warning",
    ":local_password_setup",
    ":osauth_error",
    ":password_selection",
    ":pin_setup",
  ]
}

js_library("apply_online_password") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/apply_online_password.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/dialogs:oobe_loading_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("cryptohome_recovery") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/cryptohome_recovery.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/dialogs:oobe_adaptive_dialog",
    "../../components/dialogs:oobe_loading_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("cryptohome_recovery_setup") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/cryptohome_recovery_setup.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/dialogs:oobe_adaptive_dialog",
    "../../components/dialogs:oobe_loading_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("factor_setup_success") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/factor_setup_success.js" ]
  deps = [
    "../../components:oobe_types",
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_text_button",
    "../../components/dialogs:oobe_adaptive_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("fingerprint_setup") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/fingerprint_setup.js" ]
  deps = [
    "../../components:display_manager_types",
    "../../components:oobe_cr_lottie",
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_text_button",
    "../../components/dialogs:oobe_adaptive_dialog",
    "//ash/webui/common/resources:load_time_data.m",
    "//third_party/polymer/v3_0/components-chromium/polymer:polymer_bundled",
  ]
  externs_list = [
    "//ash/webui/common/resources/quick_unlock/fingerprint_progress_externs.js",
  ]

  extra_deps = [ ":web_components" ]
}

js_library("gaia_password_changed") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/gaia_password_changed.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_next_button",
    "../../components/buttons:oobe_text_button",
    "../../components/dialogs:oobe_adaptive_dialog",
    "../../components/dialogs:oobe_loading_dialog",
  ]
  externs_list =
      [ "//ui/webui/resources/cr_elements/cr_input/cr_input_externs.js" ]
  extra_deps = [ ":web_components" ]
}

js_library("local_password_setup") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/local_password_setup.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_back_button",
    "../../components/buttons:oobe_next_button",
    "../../components/dialogs:oobe_adaptive_dialog",
    "../../components/dialogs:oobe_loading_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("osauth_error") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/osauth_error.js" ]
  deps = [
    "../../components:oobe_types",
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_text_button",
    "../../components/dialogs:oobe_adaptive_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("local_data_loss_warning") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/local_data_loss_warning.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_back_button",
    "../../components/buttons:oobe_next_button",
    "../../components/dialogs:oobe_adaptive_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("enter_old_password") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/enter_old_password.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_back_button",
    "../../components/buttons:oobe_next_button",
    "../../components/dialogs:oobe_adaptive_dialog",
    "../../components/dialogs:oobe_loading_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("password_selection") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/password_selection.js" ]
  deps = [
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_back_button",
    "../../components/buttons:oobe_next_button",
    "../../components/dialogs:oobe_adaptive_dialog",
  ]
  extra_deps = [ ":web_components" ]
}

js_library("pin_setup") {
  sources = [ "$root_gen_dir/chrome/browser/resources/chromeos/login/screens/osauth/pin_setup.js" ]
  deps = [
    "../../components:oobe_types",
    "../../components/behaviors:login_screen_behavior",
    "../../components/behaviors:multi_step_behavior",
    "../../components/behaviors:oobe_dialog_host_behavior",
    "../../components/behaviors:oobe_i18n_behavior",
    "../../components/buttons:oobe_back_button",
    "../../components/buttons:oobe_next_button",
    "../../components/buttons:oobe_text_button",
    "../../components/dialogs:oobe_adaptive_dialog",
    "//ash/webui/common/resources:cr.m",
  ]
  extra_deps = [ ":web_components" ]
  externs_list = [
    "$externs_path/quick_unlock_private.js",

    # setup_pin_keyboard_externs.js is a temporary band-aid to let this
    # closure-compiled JS library depend on the typescript file
    # setup_pin_keyboard.ts. If you remove this dependency, consider deleting
    # the externs file if it's not used elsewhere.
    "//ash/webui/common/resources/quick_unlock/setup_pin_keyboard_externs.js",
  ]
  extra_sources = [ "$interfaces_path/quick_unlock_private_interface.js" ]
}

html_to_js("web_components") {
  js_files = [
    "apply_online_password.js",
    "cryptohome_recovery.js",
    "cryptohome_recovery_setup.js",
    "factor_setup_success.js",
    "fingerprint_setup.js",
    "gaia_password_changed.js",
    "local_data_loss_warning.js",
    "enter_old_password.js",
    "local_password_setup.js",
    "osauth_error.js",
    "password_selection.js",
    "pin_setup.js",
  ]
}
